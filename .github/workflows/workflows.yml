# name: Flutter Android & iOS CI

# on:
#   push:
#     branches: [ main, develop ]
#   pull_request:
#     branches: [ main ]

# jobs:
#   # بناء وتنفيذ الاختبارات
#   test:
#     runs-on: ubuntu-latest
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
    
#     - name: Setup Flutter
#       uses: subosito/flutter-action@v2
#       with:
#         flutter-version: '3.19.0'
    
#     - name: Install dependencies
#       run: flutter pub get
    
#     - name: Run tests
#       run: flutter test
    
#     - name: Analyze code
#       run: flutter analyze

#   # بناء تطبيقات الاندرويد
#   build_android:
#     needs: test
#     runs-on: ubuntu-latest
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
    
#     - name: Setup Flutter
#       uses: subosito/flutter-action@v2
#       with:
#         flutter-version: '3.19.0'
    
#     - name: Install dependencies
#       run: flutter pub get
    
#     - name: Build Android APK
#       run: flutter build apk --release --dart-define=APP_ENV=production
    
#     - name: Build Android App Bundle
#       run: flutter build appbundle --release --dart-define=APP_ENV=production
    
#     - name: Upload Android Artifacts
#       uses: actions/upload-artifact@v4
#       with:
#         name: android-builds
#         path: |
#           build/app/outputs/flutter-apk/app-release.apk
#           build/app/outputs/bundle/release/app-release.aab

#   # بناء تطبيقات iOS
#   build_ios:
#     needs: test
#     runs-on: macos-latest    # ← مهم: لازم macos لبناء iOS
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
    
#     - name: Setup Flutter
#       uses: subosito/flutter-action@v2
#       with:
#         flutter-version: '3.19.0'
    
#     - name: Install dependencies
#       run: flutter pub get
    
#     - name: Build iOS (Debug)
#       run: flutter build ios --debug --no-codesign
    
#     - name: Build iOS (Release)
#       run: flutter build ios --release --no-codesign
    
#     - name: Upload iOS Artifacts
#       uses: actions/upload-artifact@v4
#       with:
#         name: ios-builds
#         path: build/ios/iphonesimulator